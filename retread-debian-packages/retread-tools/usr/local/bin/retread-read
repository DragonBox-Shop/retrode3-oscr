#!/bin/bash
# retread-read slot - read game from slot

# exec 2>&1	# report any errors

# NOTES:
# - this is required so that retread can access everything
# - especially if run by a PHP script in the web server
# - this fix belongs somewhere else, most likely to some .postinst
# - therefore it must be run once from the root shell after each update

chown root:root -R /usr/local/bin/retread /usr/local/games/retread 2>/dev/null
chmod ug+s /usr/local/bin/retread 2>/dev/null

case "$1" in
	/dev/slot0 )	# SNES
		echo "10 0 " | /usr/local/bin/retread
		;;
	/dev/slot1 )	# MD
		echo "200" | /usr/local/bin/retread
		;;
	/dev/slot2 )	# NES
		echo  "00 0" | /usr/local/bin/retread
		;;
	* )
		echo unknown device "$1"
		exit 1
		;;
esac
